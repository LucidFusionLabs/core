# $Id: CMakeLists.txt 1298 2011-12-11 18:46:06Z justin $

add_definitions(${LFL_APP_DEF})
include_directories(${LFL_APP_INCLUDE})
lfl_add_library(app_simple_loader STATIC simple_loader.cpp)
lfl_add_library(app_simple_resampler STATIC simple_resampler.cpp)
lfl_add_library(app_null_png STATIC null_png.cpp)
lfl_add_library(app_null_jpeg STATIC null_jpeg.cpp)
lfl_add_library(app_null_gif STATIC null_gif.cpp)
lfl_add_library(app_null_archive STATIC null_archive.cpp)
lfl_add_library(app_null_proto STATIC null_proto.cpp)

if(LFL_PROTOBUF)
  add_library(app_protobuf_proto STATIC protobuf_proto.cpp)
  target_include_directories(app_protobuf_proto PUBLIC ${PROTOBUF_INCLUDE_DIR})
  target_link_libraries(app_protobuf_proto PUBLIC ${PROTOBUF_LIBRARY})
  add_dependencies(app_protobuf_proto protoc)
endif()

if(LFL_PNG)
  lfl_add_library(app_libpng_png STATIC libpng_png.cpp)
  target_include_directories(app_libpng_png PUBLIC ${PNG_INCLUDE})
  target_link_libraries(app_libpng_png PUBLIC ${PNG_LIB})
  add_dependency(app_libpng_png ${PNG_DEP})
  if(LFL_EMSCRIPTEN)
    target_compile_options(app_libpng_png PUBLIC -s USE_LIBPNG=1)
  endif()
endif()

if(LFL_GIF)
  lfl_add_library(app_giflib_gif STATIC giflib_gif.cpp)
  target_include_directories(app_giflib_gif PUBLIC ${GIF_INCLUDE})
  target_link_libraries(app_giflib_gif PUBLIC ${GIF_LIB})
endif()

if(LFL_JPEG)
  lfl_add_library(app_libjpeg_jpeg STATIC libjpeg_jpeg.cpp)
  target_include_directories(app_libjpeg_jpeg PUBLIC ${JPEG_INCLUDE})
  target_link_libraries(app_libjpeg_jpeg PUBLIC ${JPEG_LIB})
  add_dependency(app_libjpeg_jpeg ${JPEG_DEP})
endif()

if(LFL_VORBIS)
  lfl_add_library(app_libvorbis_ogg STATIC libvorbis_ogg.cpp)
  target_include_directories(app_libvorbis_ogg PUBLIC ${VORBIS_INCLUDE})
  target_link_libraries(app_libvorbis_ogg PUBLIC ${VORBIS_LIB})
  if(LFL_EMSCRIPTEN)
    target_compile_options(app_libvorbis_ogg PUBLIC -s USE_OGG=1 USE_VORBIS=1)
  endif()
endif()

if(LFL_LIBARCHIVE)
  lfl_add_library(app_libarchive_archive STATIC libarchive_archive.cpp)
  target_include_directories(app_libarchive_archive PUBLIC ${ARCHIVE_INCLUDE})
  target_link_libraries(app_libarchive_archive PUBLIC ${ARCHIVE_LIB})
endif()

if(LFL_FFMPEG)
  lfl_add_library(app_ffmpeg_loader STATIC ffmpeg_loader.cpp)
  target_include_directories(app_ffmpeg_loader PUBLIC ${FFMPEG_INCLUDE})
  target_link_libraries(app_ffmpeg_loader PUBLIC ${FFMPEG_LIB})

  lfl_add_library(app_ffmpeg_resampler STATIC ffmpeg_resampler.cpp)
  target_include_directories(app_ffmpeg_resampler PUBLIC ${FFMPEG_INCLUDE})
  target_link_libraries(app_ffmpeg_resampler PUBLIC ${FFMPEG_LIB})
endif()

if(LFL_SDL)
  lfl_add_library(app_sdl_loader STATIC sdl_loader.cpp)
  target_include_directories(app_sdl_loader PUBLIC ${SDL_INCLUDE})
  target_link_libraries(app_sdl_loader PUBLIC ${SDL_LIB})
endif()
